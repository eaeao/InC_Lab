{% extends "itembank.html" %}
{% load staticfiles %}
{% block content %}
    <div class="div_tab" id="div_itembank_question_detail_tab">
        <a class="a_tab_nav_btn" href="/itembank/testpaper/" target="_self" id="a_tab_nav_btn_back">< 이전</a> <span class="span_itembank_tab_title">시험지 풀기</span>
    </div>
    <div class="col-lg-offset-2 col-lg-8 div_itembank_detail">
        {% for testpaper_question in testpaper.get_testpaper_questions %}
            <div class="row">
                <div class="col-md-8 col-md-offset-2 div_itembank_detail_contents">
                    <p class="p_itembank_detail_contents_unit">{{ testpaper_question.question.unit.get_title }}</p>
                    <p class="p_itembank_detail_contents_title">{{ forloop.counter }}. {{ testpaper_question.question.title }}</p>
                    {% for content in testpaper_question.get_contents %}
                        {% if content.type == "image" %}
                            <div class="p_itembank_detail_contents_image">
                                <i class="xi-arrows-alt i_itembank_detail_contents_statement_extend"></i>
                                <img src="{{ content.get_items.src.url }}">
                            </div>
                        {% elif content.type == "content" %}
                            <span class="span_itembank_detail_contents_content">{{ content.contents }}</span>
                        {% elif content.type == "text" %}
                            <p class="p_itembank_detail_contents_text">{{ content.contents }}</p>
                        {% elif content.type == "code" %}
                            <pre class='pre_itembank_detail_contents_code'><code class='python'>{{ content.contents }}</code></pre>
                        {% elif content.type == "answer_text" %}
                            <input type="text" class="form-control input_itembank_detail_contents_answer_text" name="item" placeholder="답을 입력해주세요.">
                        {% elif content.type == "answer_textarea" %}
                            <textarea class='form-control input_itembank_detail_contents_answer_textarea' name="item" placeholder='답을 입력해주세요.'></textarea>
                        {% elif content.type == "answer_choice" %}
                            {% for item in content.get_items %}
                                <div class="div_itembank_detail_contents_item"><input type="radio" name="item" value="{{ item.text }}">{{ item.text }}</div>
                            {% endfor %}
                        {% endif %}
                    {% endfor %}
                </div>
            </div>
        {% endfor %}
    </div>
    <script>
        $(document).ready(function(){
            $('input[type=radio],input[type=checkbox]').iCheck({
                checkboxClass: 'icheckbox_square-blue',
                radioClass: 'iradio_square-blue',
                increaseArea: '20%'
            });

            $('input[type=radio]').on('ifChecked', function(event){
                $(".div_itembank_detail_contents_item").removeClass("checked");
                $(".div_itembank_detail_contents_item").children(".iradio_square-blue").removeClass("checked");
                $(this).parent().parent().addClass("checked");
            });

            $(".div_itembank_detail_contents_item").hover(function(){
                $(this).children(".iradio_square-blue").addClass("hover");
            },function(){
                $(this).children(".iradio_square-blue").removeClass("hover");
            });

            $(".div_itembank_detail_contents_item").click(function(){
                $(this).children(".iradio_square-blue").children("input").iCheck('check');
            });

            $(".i_itembank_detail_contents_statement_extend").click(function(){
                $("#div_itembank_detail_extend_modal .modal-body").html($(this).parent().html());
                $("#div_itembank_detail_extend_modal i").hide();
                $("#div_itembank_detail_extend_modal").modal('show');
            });

        });
    </script>
{% endblock %}
{% block modal %}
    <div class="modal fade" id="div_itembank_detail_extend_modal" tabindex="-1" role="dialog">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-body text-center">&nbsp;</div>
            </div>
        </div>
    </div>
{% endblock %}